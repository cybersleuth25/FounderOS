{% extends 'base.html' %}
{% block title %}Pitch Report â€” {{ pitch.title }}{% endblock %}
{% block content %}
<div class="mb-6">
  <a href="{% url 'pitch_lab' %}" class="text-zinc-400 hover:text-white text-sm flex items-center gap-1 mb-4">
    <i class="fa-solid fa-arrow-left text-xs"></i> Back to Pitch Lab
  </a>
  <h1 class="text-2xl font-bold text-white">{{ pitch.title }}</h1>
  <div class="text-zinc-400 text-sm mt-1">Analyzed on {{ pitch.created_at|date:"F d, Y" }}</div>
</div>

{% if report %}
<!-- Scores -->
<div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
  <div class="card text-center">
    <div class="text-3xl font-bold text-sky-400">{{ report.overall_score }}</div>
    <div class="text-zinc-400 text-xs mt-1">Overall Score</div>
  </div>
  <div class="card text-center">
    <div class="text-3xl font-bold text-emerald-400">{{ report.clarity_score }}</div>
    <div class="text-zinc-400 text-xs mt-1">Clarity</div>
  </div>
  <div class="card text-center">
    <div class="text-3xl font-bold text-amber-400">{{ report.engagement_score }}</div>
    <div class="text-zinc-400 text-xs mt-1">Engagement</div>
  </div>
  <div class="card text-center">
    <div class="text-lg font-bold {% if report.investor_readiness == 'High' %}text-emerald-400{% elif report.investor_readiness == 'Medium' %}text-amber-400{% else %}text-red-400{% endif %}">
      {{ report.investor_readiness }}
    </div>
    <div class="text-zinc-400 text-xs mt-1">Investor Readiness</div>
  </div>
</div>

<div class="grid lg:grid-cols-2 gap-6">
  <!-- Summary -->
  <div class="card lg:col-span-2">
    <h2 class="font-semibold text-white mb-2 flex items-center gap-2">
      <i class="fa-solid fa-robot text-sky-400"></i> AI Summary
    </h2>
    {% if report._note %}<div class="badge-yellow mb-3"><i class="fa-solid fa-info-circle"></i> {{ report._note }}</div>{% endif %}
    <p class="text-zinc-300 text-sm leading-relaxed">{{ report.summary }}</p>
  </div>

  <!-- Strengths -->
  <div class="card">
    <h2 class="font-semibold text-white mb-3 flex items-center gap-2">
      <i class="fa-solid fa-thumbs-up text-emerald-400"></i> Strengths
    </h2>
    <ul class="space-y-2">
      {% for s in report.strengths %}
        <li class="flex items-start gap-2 text-zinc-300 text-sm">
          <i class="fa-solid fa-check text-emerald-400 text-xs mt-1"></i> {{ s }}
        </li>
      {% endfor %}
    </ul>
  </div>

  <!-- Weaknesses -->
  <div class="card">
    <h2 class="font-semibold text-white mb-3 flex items-center gap-2">
      <i class="fa-solid fa-triangle-exclamation text-amber-400"></i> Weaknesses
    </h2>
    <ul class="space-y-2">
      {% for w in report.weaknesses %}
        <li class="flex items-start gap-2 text-zinc-300 text-sm">
          <i class="fa-solid fa-xmark text-amber-400 text-xs mt-1"></i> {{ w }}
        </li>
      {% endfor %}
    </ul>
  </div>

  <!-- Recommendations -->
  <div class="card lg:col-span-2">
    <h2 class="font-semibold text-white mb-3 flex items-center gap-2">
      <i class="fa-solid fa-lightbulb text-purple-400"></i> AI Recommendations
    </h2>
    <ol class="space-y-2">
      {% for r in report.recommendations %}
        <li class="flex items-start gap-3 text-zinc-300 text-sm">
          <span class="w-5 h-5 rounded-full bg-purple-500/20 text-purple-400 text-xs flex items-center justify-center font-bold flex-shrink-0 mt-0.5">{{ forloop.counter }}</span>
          {{ r }}
        </li>
      {% endfor %}
    </ol>
  </div>
</div>
{% else %}
<div class="card text-center py-12">
  <i class="fa-solid fa-circle-exclamation text-zinc-600 text-4xl mb-3"></i>
  <p class="text-zinc-400">No AI analysis available for this pitch.</p>
</div>
{% endif %}

{% if pitch.description %}
<div class="card mt-6">
  <h2 class="font-semibold text-white mb-2">Original Pitch Description</h2>
  <p class="text-zinc-400 text-sm leading-relaxed">{{ pitch.description }}</p>
</div>
{% endif %}
{% endblock %}
